#!/bin/bash
grep -i 'CREATE OR REPLACE FUNCTION' *.sql | perl -ne 'if (/^(.+?):.*(migration_tools.+?)[ \(].*$/) { print "# $1:$2\n"; }' | sort | uniq

# 00-infrastructure.sql:migration_tools.assert
# 00-infrastructure.sql:migration_tools.build
# 00-infrastructure.sql:migration_tools.build_base_staging_tables
# 00-infrastructure.sql:migration_tools.build_specific_base_staging_table
# 00-infrastructure.sql:migration_tools.build_variant_staging_table
# 00-infrastructure.sql:migration_tools.create_linked_legacy_table_as
# 00-infrastructure.sql:migration_tools.create_linked_legacy_table_from
# 00-infrastructure.sql:migration_tools.init
# 00-infrastructure.sql:migration_tools.production_tables
# 01-marc.sql:migration_tools.additional_sf9_qualifying_match
# 01-marc.sql:migration_tools.consolidate_tag
# 01-marc.sql:migration_tools.get_marc_leader
# 01-marc.sql:migration_tools.get_marc_tag
# 01-marc.sql:migration_tools.get_marc_tags
# 01-marc.sql:migration_tools.get_marc_tags_filtered
# 01-marc.sql:migration_tools.insert_tags
# 01-marc.sql:migration_tools.make_stub_bib
# 01-marc.sql:migration_tools.marc_diff
# 01-marc.sql:migration_tools.marc_parses
# 01-marc.sql:migration_tools.marc_set_tag
# 01-marc.sql:migration_tools.merge_marc_fields
# 01-marc.sql:migration_tools.merge_sf9
# 01-marc.sql:migration_tools.munge_sf9_qualifying_match
# 01-marc.sql:migration_tools.owner_change_sf9_substring_match
# 01-marc.sql:migration_tools.owner_change_sf9_substring_match2
# 01-marc.sql:migration_tools.remove_sf9
# 01-marc.sql:migration_tools.set_008
# 01-marc.sql:migration_tools.set_indicator
# 01-marc.sql:migration_tools.set_leader
# 01-marc.sql:migration_tools.strip_subfield
# 01-marc.sql:migration_tools.strip_tag
# 02-barcodes.sql:migration_tools.add_codabar_checkdigit
# 02-barcodes.sql:migration_tools.add_code39mod43_checkdigit
# 02-barcodes.sql:migration_tools.add_mod16_checkdigit
# 02-barcodes.sql:migration_tools.expand_barcode
# 02-barcodes.sql:migration_tools.rebarcode
# 03-items.sql:migration_tools.add_marc_holdings_fields
# 03-items.sql:migration_tools.change_call_number
# 03-items.sql:migration_tools.change_owning_lib
# 03-items.sql:migration_tools.extract_holdings_from_marc
# 03-items.sql:migration_tools.munge_price
# 04-names.sql:migration_tools.name_parse_out_first_middle_last_comma_suffix
# 04-names.sql:migration_tools.name_parse_out_fuller_last_first_middle_and_random_affix
# 04-names.sql:migration_tools.name_parse_out_fuller_last_first_middle_and_random_affix2
# 04-names.sql:migration_tools.name_parse_out_last_comma_first_other
# 04-names.sql:migration_tools.name_parse_out_last_comma_prefix_first_middle_suffix
# 04-names.sql:migration_tools.name_parse_out_last_first_middle_and_random_affix
# 05-addresses.sql:migration_tools.address_parse_out_citystatezip
# 05-addresses.sql:migration_tools.attempt_phone
# 05-addresses.sql:migration_tools._normalize_address_suffix
# 05-addresses.sql:migration_tools.normalize_address_suffix
# 05-addresses.sql:migration_tools.parse_out_address
# 05-addresses.sql:migration_tools.parse_out_address2
# 05-addresses.sql:migration_tools.zip_to_city_state_county
# 06-ils-specific.sql:migration_tools.attempt_hz_date
# 06-ils-specific.sql:migration_tools.attempt_sierra_timestamp
# 06-ils-specific.sql:migration_tools.generate_koha_holding_tag
# 06-ils-specific.sql:migration_tools.openbiblio2marc
# 07-eg-specific.sql:migration_tools.apply_circ_matrix
# 07-eg-specific.sql:migration_tools.apply_circ_matrix_to_specific_circ
# 07-eg-specific.sql:migration_tools.assign_standing_penalties
# 07-eg-specific.sql:migration_tools.check_ou_depth
# 07-eg-specific.sql:migration_tools.create_card
# 07-eg-specific.sql:migration_tools.create_cards
# 07-eg-specific.sql:migration_tools.create_exceeds_fines
# 07-eg-specific.sql:migration_tools.create_migrating_cards
# 07-eg-specific.sql:migration_tools.create_staff_user
# 07-eg-specific.sql:migration_tools.create_user
# 07-eg-specific.sql:migration_tools.dnm_circ
# 07-eg-specific.sql:migration_tools.dnm_copy
# 07-eg-specific.sql:migration_tools.dnm_grocery
# 07-eg-specific.sql:migration_tools.dnm_hold
# 07-eg-specific.sql:migration_tools.dnm_usr
# 07-eg-specific.sql:migration_tools.duplicate_perm_group
# 07-eg-specific.sql:migration_tools.duplicate_template
# 07-eg-specific.sql:migration_tools.duplicate_template_but_change_delay
# 07-eg-specific.sql:migration_tools.duplicate_templates
# 07-eg-specific.sql:migration_tools.find_circ_matrix_matchpoint
# 07-eg-specific.sql:migration_tools.find_hold_matrix_matchpoint
# 07-eg-specific.sql:migration_tools.find_hold_matrix_matchpoint2
# 07-eg-specific.sql:migration_tools.find_mig_shelf
# 07-eg-specific.sql:migration_tools.find_shelf
# 07-eg-specific.sql:migration_tools.get_copy_price
# 07-eg-specific.sql:migration_tools.get_ou_references
# 07-eg-specific.sql:migration_tools.handle_actor_barcode_collisions
# 07-eg-specific.sql:migration_tools.handle_actor_barcode_collisions2
# 07-eg-specific.sql:migration_tools.handle_actor_sc_and_sce
# 07-eg-specific.sql:migration_tools.handle_asset_barcode_collisions
# 07-eg-specific.sql:migration_tools.handle_asset_barcode_collisions2
# 07-eg-specific.sql:migration_tools.handle_asset_sc_and_sce
# 07-eg-specific.sql:migration_tools.handle_barred_or_blocked
# 07-eg-specific.sql:migration_tools.handle_circmod
# 07-eg-specific.sql:migration_tools.handle_item_barcode
# 07-eg-specific.sql:migration_tools.handle_not_migrate
# 07-eg-specific.sql:migration_tools.handle_org
# 07-eg-specific.sql:migration_tools.handle_profile
# 07-eg-specific.sql:migration_tools._handle_shelf
# 07-eg-specific.sql:migration_tools.handle_shelf
# 07-eg-specific.sql:migration_tools.handle_status
# 07-eg-specific.sql:migration_tools.handle_user_barcode
# 07-eg-specific.sql:migration_tools.incoming_item_barcode_collisions
# 07-eg-specific.sql:migration_tools.incoming_usrname_collisions
# 07-eg-specific.sql:migration_tools.incumbent_item_barcode_collisions
# 07-eg-specific.sql:migration_tools.incumbent_usrname_collisions
# 07-eg-specific.sql:migration_tools.insert_metarecords_for_incumbent_database
# 07-eg-specific.sql:migration_tools.insert_metarecords_for_pristine_database
# 07-eg-specific.sql:migration_tools.is_circ_rule_safe_to_delete
# 07-eg-specific.sql:migration_tools.is_staff_profile
# 07-eg-specific.sql:migration_tools.reset_event
# 07-eg-specific.sql:migration_tools.set_blank_item_barcodes
# 07-eg-specific.sql:migration_tools.set_blank_usrnames
# 07-eg-specific.sql:migration_tools.set_salted_passwd
# 07-eg-specific.sql:migration_tools.simple_export_library_config
# 07-eg-specific.sql:migration_tools.simple_import_library_config
# 07-eg-specific.sql:migration_tools.str_to_numeric
# 07-eg-specific.sql:migration_tools.synccircs
# 07-eg-specific.sql:migration_tools.vivicate_actor_sc_and_sce
# 07-eg-specific.sql:migration_tools.vivicate_asset_sc_and_sce
# 08-casting-and-validation.sql:migration_tools.attempt_cast
# 08-casting-and-validation.sql:migration_tools.attempt_date
# 08-casting-and-validation.sql:migration_tools.attempt_money
# 08-casting-and-validation.sql:migration_tools.attempt_money6
# 08-casting-and-validation.sql:migration_tools.attempt_money_from_pennies
# 08-casting-and-validation.sql:migration_tools.attempt_money_from_pennies6
# 08-casting-and-validation.sql:migration_tools.attempt_timestamptz
# 08-casting-and-validation.sql:migration_tools.munge_dnm
# 09-misc.sql:migration_tools.btrim_columns
# 09-misc.sql:migration_tools.btrim_lcolumns
# 09-misc.sql:migration_tools.is_blank
# 09-misc.sql:migration_tools.null_empty_columns
# 09-misc.sql:migration_tools.null_empty_lcolumns
# 09-misc.sql:migration_tools.safer_truncate
# 10-staging.sql:migration_tools.simple_import_new_rows_by_value
# 10-staging.sql:migration_tools.split_rows_on_column_with_delimiter
# 10-staging.sql:migration_tools.stage_not_applicable_asset_stat_cats
# 21-fixed-fields.sql:migration_tools.modify_biblio_fixed_fields
# 21-fixed-fields.sql:migration_tools.modify_fixed_fields
# 21-fixed-fields.sql:migration_tools.modify_staged_fixed_fields
# 21-fixed-fields.sql:migration_tools.postfix_vlist
# 21-fixed-fields.sql:migration_tools.reingest_staged_record_attributes
# 21-fixed-fields.sql:migration_tools.set_exp_sfs
# 21-fixed-fields.sql:migration_tools.show_staged_vlist
# 21-fixed-fields.sql:migration_tools.stage_vlist
# 21-fixed-fields.sql:migration_tools.view_staged_vlist
# 22-anyarray.sql:migration_tools.anyarray_concat
# 22-anyarray.sql:migration_tools.anyarray_concat_uniq
# 22-anyarray.sql:migration_tools.anyarray_diff
# 22-anyarray.sql:migration_tools.anyarray_diff_uniq
# 22-anyarray.sql:migration_tools.anyarray_is_array
# 22-anyarray.sql:migration_tools.anyarray_numeric_only
# 22-anyarray.sql:migration_tools.anyarray_ranges
# 22-anyarray.sql:migration_tools.anyarray_remove
# 22-anyarray.sql:migration_tools.anyarray_remove_null
# 22-anyarray.sql:migration_tools.anyarray_sort
# 22-anyarray.sql:migration_tools.anyarray_uniq
# 99-deprecated.sql:migration_tools.apply_circ_matrix_after_20
# 99-deprecated.sql:migration_tools.apply_circ_matrix_before_20
# 99-deprecated.sql:migration_tools.attempt_phone
# 99-deprecated.sql:migration_tools.base_circ_field_map
# 99-deprecated.sql:migration_tools.base_copy_location_map
# 99-deprecated.sql:migration_tools.base_item_dynamic_field_map
# 99-deprecated.sql:migration_tools.debug_exec
# 99-deprecated.sql:migration_tools.exec
# 99-deprecated.sql:migration_tools.handle_link
# 99-deprecated.sql:migration_tools.handle_link2
# 99-deprecated.sql:migration_tools.handle_link3
# 99-deprecated.sql:migration_tools.handle_link3_concat_skip_null
# 99-deprecated.sql:migration_tools.handle_link3_skip_false
# 99-deprecated.sql:migration_tools.handle_link3_skip_null
# 99-deprecated.sql:migration_tools.handle_link3_skip_null_or_empty_string
# 99-deprecated.sql:migration_tools.handle_link3_skip_true
# 99-deprecated.sql:migration_tools.insert_856_9
# 99-deprecated.sql:migration_tools.insert_856_9_conditional
# 99-deprecated.sql:migration_tools.insert_base_into_production
# 99-deprecated.sql:migration_tools.insert_into_production
# 99-deprecated.sql:migration_tools.is_staff_profile
# 99-deprecated.sql:migration_tools.log
# 99-deprecated.sql:migration_tools.map_base_circ_table_dynamic
# 99-deprecated.sql:migration_tools.map_base_item_table_dynamic
# 99-deprecated.sql:migration_tools.map_base_item_table_locations
# 99-deprecated.sql:migration_tools.map_base_patron_profile
# 99-deprecated.sql:migration_tools.push_bib_sequence
# 99-deprecated.sql:migration_tools.refresh_opac_visible_copies
